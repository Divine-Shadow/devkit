#!/usr/bin/env bash
set -euo pipefail

# Canonical entrypoint: exec the compiled Go CLI only.
# No fallbacks. If missing, fail loudly with a clear message.

SCRIPT_DIR="$(cd -- "$(dirname -- "${BASH_SOURCE[0]}")" && pwd)"
KIT_DIR="$(cd -- "$SCRIPT_DIR/.." && pwd)"
BIN="$KIT_DIR/bin/devctl"

if [[ ! -x "$BIN" ]]; then
  echo "devkit error: missing CLI binary" >&2
  echo "Expected at: $BIN" >&2
  echo "Build it with: make -C \"$KIT_DIR/../cli/devctl\" build" >&2
  exit 127
fi

exec "$BIN" "$@"
